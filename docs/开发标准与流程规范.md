# 可意AI心理医生 - 开发标准与流程规范

> 版本: v1.0 | 创建日期: 2026-02-13

---

## 目录

1. [项目阶段定义](#1-项目阶段定义)
2. [MVP功能范围](#2-mvp功能范围)
3. [开发流程](#3-开发流程)
4. [代码规范](#4-代码规范)
5. [发布与反馈流程](#5-发布与反馈流程)
6. [AI编程交互指南](#6-ai编程交互指南)

---

## 1. 项目阶段定义

| 阶段 | 名称 | 说明 | 目标 |
|------|------|------|------|
| Phase 0 | 想法验证 | 验证核心假设 | 找到种子用户 |
| Phase 1 | MVP | 最小可行产品 | 核心功能可用 |
| Phase 2 | 快速迭代 | 收集反馈，持续改进 | 用户增长 |
| Phase 3 | 完善功能 | 添加计划功能 | 产品成熟 |
| Phase 4 | 商业化 | 付费功能 | 盈利 |

**当前阶段：Phase 1 - MVP**

---

## 2. MVP功能范围

### 2.1 核心功能（必须）

- [ ] 用户可以发送消息
- [ ] AI可以生成回复（基于工作流手册）
- [ ] 简单的对话历史记录

### 2.2 扩展功能（可选）

- [ ] 情绪识别
- [ ] 风险预警
- [ ] 用户登录/注册

### 2.3 不做（MVP阶段）

- 复杂的心理评估问卷
- 个案概念化系统
- 多代理架构
- 视频/语音通话

---

## 3. 开发流程

### 3.1 单次开发循环

```
1. 任务拆分
   ↓
2. 编写代码（小步提交）
   ↓
3. 本地测试
   ↓
4. 推送到测试环境
   ↓
5. 验证功能
   ↓
6. 收集反馈
```

### 3.2 任务管理

使用 `.trae/tasks` 目录管理任务：

```
.trae/tasks/
├── active/          # 进行中的任务
│   └── TASK_xxx.md
├── completed/       # 已完成任务
└── archived/        # 已归档任务
```

### 3.3 提交规范

**提交信息格式**：
```
<类型>: <简短描述>

详细说明（可选）

Co-Authored-By: Claude <noreply@anthropic.com>
```

**类型前缀**：
- `feat`: 新功能
- `fix`: bug修复
- `docs`: 文档
- `refactor`: 重构
- `chore`: 杂项

---

## 4. 代码规范

### 4.1 后端（Python/FastAPI）

```python
# 标准结构
from typing import Optional
from datetime import datetime

class ServiceName:
    """服务类说明"""

    def __init__(self, param: str):
        self.param = param

    async def method_name(self, arg: str) -> dict:
        """方法说明

        Args:
            arg: 参数说明

        Returns:
            返回值说明
        """
        pass
```

### 4.2 前端（React/TypeScript）

```typescript
// 标准组件结构
interface Props {
  title: string;
  onSubmit: (data: Data) => void;
}

export function Component({ title, onSubmit }: Props) {
  return <div>{title}</div>;
}
```

---

## 5. 发布与反馈流程

### 5.1 快速发布周期

| 周期 | 时长 | 内容 |
|------|------|------|
| 开发 | 1-2天 | 实现功能 |
| 测试 | 半天 | 验证功能 |
| 发布 | 即时 | 推送到线上 |
| 反馈 | 持续 | 收集用户反馈 |

### 5.2 用户反馈收集

**反馈渠道**：
1. GitHub Issues
2. 简单的反馈表单（嵌入页面）
3. 直接对话

**反馈处理**：
- 每周review一次反馈
- 按优先级分类
- 纳入下个迭代

### 5.3 部署简化

**MVP阶段部署策略**：
- 使用Vercel/Railway等免费托管
- 每次push自动部署
- 简单URL分享给用户测试

---

## 6. AI编程交互指南

### 6.1 高效交互原则

1. **明确任务** - 一次只做一件事
2. **提供上下文** - 告诉AI你在哪里、做什么
3. **小步前进** - 不要一次让AI写整个系统
4. **及时反馈** - 告诉AI什么对了、什么不对

### 6.2 推荐交互模式

**模式1：单步执行**
```
你: 写一个hello world函数
AI: [写代码]
你: 测试一下
AI: [测试]
```

**模式2：后台代理**
```
你: 启动后台代理
AI: [启动代理] 你可以边干活边和代理聊
```

**模式3：计划执行**
```
你: 我想做一个登录功能
AI: 好的，我来规划一下步骤...
[列出步骤]
你: 开始做第1步
AI: [执行]
```

### 6.3 常见错误

| 错误 | 结果 | 正确做法 |
|------|------|----------|
| 任务太大 | 代码质量差 | 拆分成小任务 |
| 没有上下文 | 答非所问 | 说明项目背景 |
| 不测试 | bug多 | 及时验证 |
| 不提交 | 丢失工作 | 频繁提交 |

---

## 7. 下一步行动

### 7.1 立即执行

- [ ] 确定MVP最小功能集
- [ ] 选择部署平台
- [ ] 创建测试分享链接

### 7.2 本周目标

- [ ] 完成MVP核心功能
- [ ] 部署第一个测试版本
- [ ] 找到5个测试用户

---

## 附录：快速命令参考

```bash
# 启动后端
cd backend && python run.py

# 启动前端
cd frontend && npm run dev

# 运行测试
cd backend && pytest

# 提交代码
git add . && git commit -m "feat: 添加功能" && git push
```

---

*此文档将持续更新*
