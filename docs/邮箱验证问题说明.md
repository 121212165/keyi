# 邮箱验证问题说明

## 问题描述

Supabase Auth 默认开启邮箱验证功能，用户注册后需要点击邮件中的验证链接才能登录。

但在开发环境中（localhost），邮件验证链接可能无法正常工作：
- 用户收到验证邮件
- 点击链接后跳转到 localhost:3000
- 可能遇到重定向问题或浏览器限制

## 当前状态

- 注册功能：✅ 正常
- 登录功能：❌ 需要邮箱验证后才能登录

## 解决方案

### 方案1：开发环境关闭邮箱验证（推荐）

**操作步骤：**
1. 打开 Supabase 控制台：https://supabase.com/dashboard
2. 进入项目 `zrzwpucermocngirynkn`
3. 点击左侧 **Authentication** → **Providers** → **Email**
4. 找到 **"Confirm email"** 选项
5. **取消勾选**
6. 点击 **Save**

**优点：** 立即可用，注册后直接登录
**注意：** 生产环境上线前需要重新开启

---

### 方案2：手动验证用户（临时方案）

如果已经注册但无法登录：
1. Supabase 控制台 → **Authentication** → **Users**
2. 找到目标用户
3. 点击 **"···"** 菜单
4. 选择 **"Confirm email"**
5. 用户即可登录

---

### 方案3：生产环境配置

**上线前需要配置：**

1. **配置 Site URL**
   - Supabase 控制台 → **Authentication** → **URL Configuration**
   - **Site URL**: 填写你的生产域名
   - **Redirect URLs**: 添加允许的重定向地址

2. **开启邮箱验证**
   - 重新勾选 **"Confirm email"**
   - 配置邮件模板（可选）

---

## 相关文档

- Supabase Auth 文档：https://supabase.com/docs/guides/auth
- 邮箱验证配置：https://supabase.com/docs/guides/auth/email-templates
- 重定向配置：https://supabase.com/docs/guides/auth/redirect-urls

---

## 后续优化建议

1. **自定义验证码系统**
   - 支持输入验证码登录（无需邮件）
   - 更适合国内用户
   - 需要额外开发

2. **短信验证码登录**
   - 国内用户更习惯
   - 需要配置短信服务

---

## 记录信息

| 项目 | 值 |
|------|-----|
| Supabase URL | https://zrzwpucermocngirynkn.supabase.co |
| 邮箱验证状态 | 默认开启（开发环境建议关闭） |
| 创建日期 | 2026-02-14 |
